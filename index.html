<!DOCTYPE html>
<html lang="en" x-data="vendorPortal" x-init>
<head>
  <meta charset="UTF-8" />
  <title>Vendor Portal – Manual Orders</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Alpine.js -->
  <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
  <link rel="stylesheet" href="style.css" />
</head>
<body class="min-h-screen flex items-center justify-center px-4 py-10">
  <div class="max-w-6xl w-full ios-glass overflow-hidden">
    <!-- Top bar -->
    <header class="flex items-center justify-between px-6 py-4 border-b border-white/40">
      <div class="flex items-center gap-3">
        <div class="h-10 w-10 rounded-2xl bg-gradient-to-br from-pink-400 to-rose-500 flex items-center justify-center shadow-inner">
          <span class="text-white text-lg font-semibold">VP</span>
        </div>
        <div>
          <h1 class="text-lg font-semibold tracking-tight">Vendor Portal</h1>
          <p class="text-xs text-slate-600">Event manual, rules & additional orders</p>
        </div>
      </div>

      <div class="flex items-center gap-3">
        <!-- Language toggle -->
        <div class="flex items-center gap-1 text-xs bg-pink-50 rounded-full px-1 py-1">
          <button
            class="px-3 py-1 rounded-full"
            :class="lang === 'en' ? 'bg-white text-rose-700 shadow-sm' : 'text-slate-600'"
            @click="setLang('en')"
          >
            EN
          </button>
          <button
            class="px-3 py-1 rounded-full"
            :class="lang === 'ms' ? 'bg-white text-rose-700 shadow-sm' : 'text-slate-600'"
            @click="setLang('ms')"
          >
            BM
          </button>
        </div>

        <!-- Auth status -->
        <template x-if="isAuthenticated">
          <div class="flex items-center gap-3">
            <div class="text-right">
              <p class="text-xs font-medium" x-text="user.brandName || 'Vendor'"></p>
              <p class="text-[11px] text-slate-500" x-text="user.boothNo ? 'Booth ' + user.boothNo : 'No booth assigned'"></p>
            </div>
            <button class="text-xs text-rose-600 underline" @click="logout">Logout</button>
          </div>
        </template>
      </div>
    </header>

    <!-- Main content -->
    <main class="grid md:grid-cols-[260px,1fr]">
      <!-- Sidebar -->
      <aside class="border-r border-white/40 bg-[color:var(--bg-alt)]/60 p-4 flex flex-col gap-4">
        <div class="text-xs text-slate-600 mb-1">Navigation</div>
        <nav class="flex flex-col gap-2 text-sm">
          <button
            class="nav-pill"
            :class="currentPage === 'dashboard' ? 'nav-pill--active' : ''"
            @click="currentPage = 'dashboard'"
            x-show="isAuthenticated"
          >
            <span>Home Overview</span>
          </button>
          <button
            class="nav-pill"
            :class="currentPage === 'manual' ? 'nav-pill--active' : ''"
            @click="currentPage = 'manual'"
            x-show="isAuthenticated"
          >
            <span>Rules Manual</span>
          </button>
          <button
            class="nav-pill"
            :class="currentPage === 'order' ? 'nav-pill--active' : ''"
            @click="currentPage = 'order'"
            x-show="isAuthenticated"
          >
            <span x-text="text[lang].order"></span>
          </button>
          <button
            class="nav-pill"
            :class="currentPage === 'logistics' ? 'nav-pill--active' : ''"
            @click="currentPage = 'logistics'"
            x-show="isAuthenticated"
          >
            <span x-text="text[lang].logistics"></span>
          </button>
          <button
            class="nav-pill"
            :class="currentPage === 'profile' ? 'nav-pill--active' : ''"
            @click="currentPage = 'profile'"
            x-show="isAuthenticated"
          >
            <span x-text="text[lang].profile"></span>
          </button>
          <button
            class="nav-pill"
            :class="currentPage === 'auth' ? 'nav-pill--active' : ''"
            @click="currentPage = 'auth'"
            x-show="!isAuthenticated"
          >
            <span>Login / Signup</span>
          </button>
        </nav>

        <!-- Quick help -->
        <div class="mt-6 ios-glass-card p-3 text-[11px] leading-relaxed">
          <h3 class="font-semibold text-xs mb-1">Need help?</h3>
          <p>Contact Operations PIC at</p>
          <p class="font-medium text-rose-700">+60-1X-XXXXXXX</p>
          <p>Email vendor@yourevent.com</p>
        </div>
      </aside>

      <!-- Pages -->
      <section class="p-6 space-y-6 overflow-y-auto max-h-[calc(100vh-120px)]">
        <!-- Auth page -->
        <section x-show="currentPage === 'auth'" x-cloak class="space-y-6">
          <div class="grid md:grid-cols-2 gap-6 items-stretch">
            <!-- Left: welcome / event overview -->
            <div class="ios-glass-card p-5 flex flex-col justify-between">
              <div>
                <h2 class="text-xl font-semibold mb-1" x-text="text[lang].welcome"></h2>
                <p class="text-sm text-slate-600 mb-4" x-text="text[lang].subtitle"></p>
                <div class="text-xs space-y-2">
                  <div>
                    <div class="font-semibold text-slate-700">Event overview</div>
                    <p>Your Event Name – 12–15 Mac 2025, Hall A, KLCC.</p>
                  </div>
                  <div>
                    <div class="font-semibold text-slate-700">Key contacts</div>
                    <p>Operations: +60-1X-XXXXXXX · Finance: finance@yourevent.com.</p>
                  </div>
                  <div>
                    <div class="font-semibold text-slate-700">Important note</div>
                    <p>All additional orders must be submitted 7 days before event.</p>
                  </div>
                </div>
              </div>
              <div class="mt-4 text-[11px] text-slate-500">
                Once logged in, you can read full rules, check logistics timeline and place extra orders.
              </div>
            </div>

            <!-- Right: Auth card -->
            <div class="ios-glass-card p-5">
              <div class="flex mb-4 bg-pink-50 rounded-full p-1 text-xs">
                <button
                  class="flex-1 py-2 rounded-full"
                  :class="authMode === 'login' ? 'bg-white shadow-sm text-rose-700 font-medium' : 'text-slate-500'"
                  @click="authMode = 'login'"
                  x-text="text[lang].login_tab"
                ></button>
                <button
                  class="flex-1 py-2 rounded-full"
                  :class="authMode === 'signup' ? 'bg-white shadow-sm text-rose-700 font-medium' : 'text-slate-500'"
                  @click="authMode = 'signup'"
                  x-text="text[lang].signup_tab"
                ></button>
              </div>

              <p class="text-xs text-slate-600 mb-4" x-text="authMode === 'login' ? text[lang].login_desc : text[lang].signup_desc"></p>

              <form class="space-y-3" @submit.prevent="login">
                <div class="space-y-1">
                  <label class="text-xs font-medium">Email</label>
                  <div class="ios-input px-3 py-2 flex items-center gap-2">
                    <input
                      type="email"
                      class="bg-transparent text-xs w-full outline-none"
                      x-model="user.email"
                      placeholder="vendor@email.com"
                    />
                  </div>
                </div>

                <template x-if="authMode === 'signup'">
                  <div class="space-y-1">
                    <label class="text-xs font-medium">Brand Name</label>
                    <div class="ios-input px-3 py-2 flex items-center gap-2">
                      <input
                        type="text"
                        class="bg-transparent text-xs w-full outline-none"
                        x-model="user.brandName"
                        placeholder="Your Brand"
                      />
                    </div>
                  </div>
                </template>

                <div class="space-y-1">
                  <label class="text-xs font-medium">Password</label>
                  <div class="ios-input px-3 py-2 flex items-center gap-2">
                    <input
                      type="password"
                      class="bg-transparent text-xs w-full outline-none"
                      placeholder="••••••••"
                    />
                  </div>
                </div>

                <button type="submit" class="btn-primary w-full mt-3 text-xs py-2.5">
                  <span x-text="authMode === 'login' ? text[lang].login_tab : text[lang].signup_tab"></span>
                </button>
              </form>
            </div>
          </div>
        </section>

        <!-- Dashboard Home -->
        <section x-show="currentPage === 'dashboard'" x-cloak class="space-y-5">
          <div class="grid md:grid-cols-3 gap-4">
            <div class="md:col-span-2 ios-glass-card p-4">
              <h2 class="text-sm font-semibold mb-1">Today’s overview</h2>
              <p class="text-xs text-slate-600 mb-3">Quick view of your booth and upcoming logistics.</p>
              <div class="grid sm:grid-cols-3 gap-3 text-xs">
                <div class="stat-card">
                  <div class="text-[11px] text-slate-500 mb-1">Booth</div>
                  <div class="text-base font-semibold" x-text="user.boothNo || 'Not set'"></div>
                </div>
                <div class="stat-card">
                  <div class="text-[11px] text-slate-500 mb-1">Next key date</div>
                  <template x-if="logisticsTimeline.length">
                    <div>
                      <div class="font-semibold" x-text="logisticsTimeline[0].time + ' – ' + logisticsTimeline[0].title"></div>
                      <div class="text-[11px] text-slate-500" x-text="logisticsTimeline[0].desc"></div>
                    </div>
                  </template>
                </div>
                <div class="stat-card">
                  <div class="text-[11px] text-slate-500 mb-1">Cart total (MYR)</div>
                  <div class="text-base font-semibold" x-text="getCartTotal()"></div>
                </div>
              </div>
            </div>

            <div class="ios-glass-card p-4 text-xs space-y-2">
              <h3 class="text-sm font-semibold">Quick actions</h3>
              <button class="btn-secondary w-full" @click="currentPage = 'order'">Order extra items</button>
              <button class="btn-secondary w-full" @click="currentPage = 'manual'">Read rules manual</button>
              <button class="btn-secondary w-full" @click="currentPage = 'logistics'">View logistics timeline</button>
            </div>
          </div>

          <div class="grid md:grid-cols-2 gap-4">
            <div class="ios-glass-card p-4 text-xs space-y-2">
              <h3 class="text-sm font-semibold mb-1">Important highlights</h3>
              <ul class="list-disc list-inside space-y-1">
                <li>Move-in only via loading bay with valid pass.</li>
                <li>No open flames or cooking equipment unless approved.</li>
                <li>Final payment for additional orders due 3 days before event.</li>
              </ul>
            </div>
            <div class="ios-glass-card p-4 text-xs space-y-2">
              <h3 class="text-sm font-semibold mb-1">Announcements</h3>
              <ul class="space-y-1">
                <li>Parking passes collection starts 2 days before event at Hall A foyer.</li>
                <li>Submit booth layout changes by 7 days before event.</li>
              </ul>
            </div>
          </div>
        </section>

        <!-- Rules Manual page -->
        <section x-show="currentPage === 'manual'" x-cloak class="space-y-4">
          <div class="ios-glass-card p-4 text-xs space-y-3">
            <div class="flex items-center justify-between gap-2">
              <div>
                <h2 class="text-sm font-semibold">Rules & Regulations</h2>
                <p class="text-[11px] text-slate-600">Please read carefully. These are binding for all vendors.</p>
              </div>
              <a href="#" class="text-[11px] text-rose-700 underline">Download full PDF</a>
            </div>

            <div class="grid md:grid-cols-2 gap-3">
              <div>
                <h3 class="font-semibold text-xs mb-1">General rules</h3>
                <ul class="list-disc list-inside space-y-1">
                  <li>Vendor badges must be worn at all times inside the hall.</li>
                  <li>Keep your booth area clean and free from obstruction.</li>
                  <li>Noise levels must be controlled to avoid disturbing neighbours.</li>
                </ul>
              </div>
              <div>
                <h3 class="font-semibold text-xs mb-1">Booth setup & teardown</h3>
                <ul class="list-disc list-inside space-y-1">
                  <li>Setup allowed only during official move-in hours.</li>
                  <li>No drilling or nailing into hall structures or panels.</li>
                  <li>All items must be removed by teardown deadline.</li>
                </ul>
              </div>
              <div>
                <h3 class="font-semibold text-xs mb-1">Payment & orders</h3>
                <ul class="list-disc list-inside space-y-1">
                  <li>Additional orders are confirmed only after payment.</li>
                  <li>No refunds for confirmed and delivered items.</li>
                  <li>Last-minute orders are subject to stock availability.</li>
                </ul>
              </div>
              <div>
                <h3 class="font-semibold text-xs mb-1">Safety & prohibited items</h3>
                <ul class="list-disc list-inside space-y-1">
                  <li>No flammable, explosive or illegal items allowed.</li>
                  <li>All electrical equipment must be properly rated.</li>
                  <li>Keep all fire exits and aisles clear at all times.</li>
                </ul>
              </div>
            </div>

            <div class="ios-glass-card p-4 text-xs space-y-2">
              <h3 class="text-sm font-semibold mb-1">FAQ</h3>
              <div class="space-y-1">
                <p class="font-semibold">How do I order extra furniture?</p>
                <p>Go to “Order” tab, select category and quantity, then proceed to checkout and follow payment instructions.</p>
              </div>
              <div class="space-y-1">
                <p class="font-semibold">When will my items arrive?</p>
                <p>Confirmed orders will be delivered to your booth before doors open on event day.</p>
              </div>
            </div>
          </div>
        </section>

        <!-- Order page -->
        <section x-show="currentPage === 'order'" x-cloak class="space-y-5">
          <div class="flex items-center justify-between gap-2">
            <div>
              <h2 class="text-sm font-semibold" x-text="text[lang].order"></h2>
              <p class="text-[11px] text-slate-600">Select additional items and submit for confirmation.</p>
            </div>
            <div class="text-xs text-slate-600">
              Cart total:
              <span class="font-semibold text-rose-700" x-text="getCartTotal()"></span>
              MYR
            </div>
          </div>

          <!-- Category pills -->
          <div class="flex flex-wrap gap-2 text-xs">
            <template x-for="(label, key) in text[lang].categories" :key="key">
              <button
                class="px-3 py-1.5 rounded-full bg-pink-50 text-slate-600"
                :class="activeCategory === key ? 'bg-rose-500 text-white shadow-md' : ''"
                @click="activeCategory = key"
                x-text="label"
              ></button>
            </template>
          </div>

          <!-- Product grid -->
          <div class="grid sm:grid-cols-2 md:grid-cols-3 gap-4">
            <template x-for="product in products.filter(p => p.category === activeCategory)" :key="product.id">
              <div class="ios-glass-card p-3 text-xs flex flex-col gap-2">
                <div class="rounded-2xl overflow-hidden bg-pink-100 mb-1">
                  <img :src="product.img" :alt="product.name" class="w-full h-24 object-cover" />
                </div>
                <div class="flex-1">
                  <div class="font-semibold text-slate-800" x-text="product.name"></div>
                  <div class="text-[11px] text-slate-500">
                    MYR <span x-text="product.price.toFixed(2)"></span> / unit
                  </div>
                </div>
                <div class="flex items-center justify-between gap-2 mt-2">
                  <div class="flex items-center gap-1">
                    <button class="qty-btn" @click="addToCart(product.id, -1)">-</button>
                    <div class="w-8 text-center" x-text="cart[product.id] || 0"></div>
                    <button class="qty-btn" @click="addToCart(product.id, 1)">+</button>
                  </div>
                  <button class="btn-primary text-[11px] px-3 py-1.5" @click="openCheckout">Checkout</button>
                </div>
              </div>
            </template>
          </div>

          <!-- Checkout modal -->
          <div
            x-show="showCheckout"
            x-cloak
            class="fixed inset-0 z-40 flex items-center justify-center bg-slate-900/30"
          >
            <div class="ios-glass-card max-w-md w-full mx-4 p-4 text-xs bg-[color:var(--bg-alt)]">
              <div class="flex items-center justify-between mb-3">
                <h3 class="text-sm font-semibold" x-text="text[lang].checkout_title"></h3>
                <button class="text-[11px] text-slate-500" @click="showCheckout = false" x-text="text[lang].cancel"></button>
              </div>
              <p class="text-[11px] text-slate-600 mb-3" x-text="text[lang].checkout_desc"></p>

              <div class="max-h-48 overflow-y-auto mb-3 space-y-1">
                <template x-for="item in getCartItems()" :key="item.id">
                  <div class="flex items-center justify-between border-b border-slate-200/60 py-1">
                    <div>
                      <div class="font-medium" x-text="item.name"></div>
                      <div class="text-[11px] text-slate-500">
                        MYR <span x-text="item.price.toFixed(2)"></span> × <span x-text="item.qty"></span>
                      </div>
                    </div>
                    <div class="font-semibold text-rose-700" x-text="item.subtotal"></div>
                  </div>
                </template>
              </div>

              <div class="flex items-center justify-between mb-3">
                <span class="text-[11px] font-medium" x-text="text[lang].cart_total"></span>
                <span class="font-semibold text-rose-700" x-text="getCartTotal() + ' MYR'"></span>
              </div>

              <button
                class="btn-primary w-full py-2 text-xs"
                @click="processPayment"
                :disabled="isSubmitting"
              >
                <span x-show="!isSubmitting" x-text="text[lang].confirm"></span>
                <span x-show="isSubmitting">Processing...</span>
              </button>
            </div>
          </div>

          <!-- Success modal -->
          <div
            x-show="showSuccess"
            x-cloak
            class="fixed inset-0 z-40 flex items-center justify-center bg-slate-900/30"
          >
            <div class="ios-glass-card max-w-sm w-full mx-4 p-4 text-xs bg-[color:var(--bg-alt)] text-center space-y-2">
              <h3 class="text-sm font-semibold" x-text="text[lang].success_title"></h3>
              <p class="text-[11px] text-slate-600" x-text="text[lang].success_desc"></p>
              <button class="btn-primary w-full py-2 text-xs" @click="finishOrder" x-text="text[lang].back_home"></button>
            </div>
          </div>
        </section>

        <!-- Logistics page -->
        <section x-show="currentPage === 'logistics'" x-cloak class="space-y-4">
          <div class="ios-glass-card p-4 text-xs space-y-3">
            <h2 class="text-sm font-semibold mb-1" x-text="text[lang].logistics"></h2>
            <p class="text-[11px] text-slate-600">Key dates and operational timings for your planning.</p>

            <div class="space-y-2">
              <template x-for="item in logisticsTimeline" :key="item.time + item.title">
                <div class="flex items-start gap-3">
                  <div class="timeline-dot mt-1.5"></div>
                  <div>
                    <div class="flex items-center gap-2">
                      <div class="font-semibold text-xs" x-text="item.time + ' – ' + item.title"></div>
                      <span class="px-2 py-0.5 rounded-full bg-pink-50 text-[10px] text-rose-700" x-text="item.status"></span>
                    </div>
                    <p class="text-[11px] text-slate-600" x-text="item.desc"></p>
                  </div>
                </div>
              </template>
            </div>

            <div class="ios-glass-card p-4 text-xs space-y-2">
              <h3 class="text-sm font-semibold mb-1">Logistics notes</h3>
              <ul class="list-disc list-inside space-y-1">
                <li>All vehicles must follow loading bay schedule given by organizer.</li>
                <li>Vendors are responsible for their own trolleys or manpower.</li>
                <li>Any damage to hall property will be charged to vendor.</li>
              </ul>
            </div>
          </div>
        </section>

        <!-- Profile page -->
        <section x-show="currentPage === 'profile'" x-cloak class="space-y-4">
          <div class="ios-glass-card p-4 text-xs space-y-3">
            <div class="flex items-center justify-between">
              <div>
                <h2 class="text-sm font-semibold" x-text="text[lang].profile"></h2>
                <p class="text-[11px] text-slate-600">Keep your brand and booth info up to date.</p>
              </div>
              <template x-if="user.logo">
                <img :src="user.logo" alt="Logo preview" class="h-10 w-10 rounded-2xl object-cover shadow-md" />
              </template>
            </div>

            <div class="grid md:grid-cols-2 gap-3">
              <div class="space-y-1">
                <label class="text-xs font-medium">Company Name</label>
                <div class="ios-input px-3 py-2">
                  <input type="text" class="bg-transparent text-xs w-full outline-none" x-model="user.companyName" />
                </div>
              </div>
              <div class="space-y-1">
                <label class="text-xs font-medium">Brand Name</label>
                <div class="ios-input px-3 py-2">
                  <input type="text" class="bg-transparent text-xs w-full outline-none" x-model="user.brandName" />
                </div>
              </div>
              <div class="space-y-1">
                <label class="text-xs font-medium">PIC Name</label>
                <div class="ios-input px-3 py-2">
                  <input type="text" class="bg-transparent text-xs w-full outline-none" x-model="user.picName" />
                </div>
              </div>
              <div class="space-y-1">
                <label class="text-xs font-medium">Phone</label>
                <div class="ios-input px-3 py-2 flex items-center gap-2">
                  <input type="text" class="bg-transparent text-xs w-14 outline-none" x-model="user.phonePrefix" />
                  <input type="text" class="bg-transparent text-xs w-full outline-none" x-model="user.phone" />
                </div>
              </div>
              <div class="space-y-1 md:col-span-2">
                <label class="text-xs font-medium">Address</label>
                <div class="ios-input px-3 py-2">
                  <textarea
                    class="bg-transparent text-xs w-full outline-none resize-none"
                    rows="2"
                    x-model="user.address"
                  ></textarea>
                </div>
              </div>
              <div class="space-y-1">
                <label class="text-xs font-medium">Country</label>
                <div class="ios-input px-3 py-2">
                  <input type="text" class="bg-transparent text-xs w-full outline-none" x-model="user.country" />
                </div>
              </div>
              <div class="space-y-1">
                <label class="text-xs font-medium">Booth No.</label>
                <div class="ios-input px-3 py-2">
                  <input type="text" class="bg-transparent text-xs w-full outline-none" x-model="user.boothNo" />
                </div>
              </div>
            </div>

            <div class="grid md:grid-cols-2 gap-3">
              <div class="space-y-1">
                <label class="text-xs font-medium" x-text="text[lang].upload_logo"></label>
                <div class="ios-input px-3 py-2 flex items-center justify-between gap-2">
                  <input
                    type="file"
                    accept="image/*"
                    class="text-[11px]"
                    @change="handleLogoUpload($event)"
                  />
                </div>
              </div>
              <div class="space-y-1">
                <label class="text-xs font-medium" x-text="text[lang].social_media"></label>
                <div class="ios-input px-3 py-2 space-y-1">
                  <input
                    type="url"
                    class="bg-transparent text-[11px] w-full outline-none"
                    x-model="user.socials.instagram"
                    placeholder="https://instagram.com/yourbrand"
                  />
                  <input
                    type="url"
                    class="bg-transparent text-[11px] w-full outline-none"
                    x-model="user.socials.tiktok"
                    placeholder="https://tiktok.com/@yourbrand"
                  />
                  <input
                    type="url"
                    class="bg-transparent text-[11px] w-full outline-none"
                    x-model="user.socials.facebook"
                    placeholder="https://facebook.com/yourbrand"
                  />
                  <p class="text-[10px] text-slate-500" x-text="text[lang].social_hint"></p>
                </div>
              </div>
            </div>

            <div class="flex justify-end">
              <button class="btn-primary px-5 py-2 text-xs" x-text="text[lang].save_profile"></button>
            </div>
          </div>
        </section>
      </section>
    </main>
  </div>

  <script src="app.js"></script>
</body>
</html>
